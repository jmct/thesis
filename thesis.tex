%\documentclass[justified, twoside, a4paper, symmetric]{tufte-book}
\documentclass[dottedtoc, headinclude, footinclude=true, a4paper, numbers=noenddot]{scrreprt}

\title{Improving Implicit Parallelism}

\author{Jos\'{e} Manuel Calder\'{o}n Trilla}

\usepackage[pdfspacing]{classicthesis}

%%%%%% set the spacing
\usepackage{setspace}
\onehalfspacing

\usepackage{graphicx}
\usepackage{caption}
\usepackage{listings}
\usepackage{mathtools}
\usepackage{fancyvrb}
\usepackage{hyperref}
\usepackage{microtype}
\usepackage{breakcites}
\usepackage{subcaption}
\usepackage{alltt}
\usepackage{color}

%%%% TODO Package %%%% 
\usepackage[colorinlistoftodos,prependcaption,textsize=small]{todonotes}
\let\marginpar\oldmarginpar

\usepackage{xargs}
\usepackage{amsmath}
\usepackage{fancyvrb}
\usepackage{latexsym}
\usepackage{textcomp}
%\usepackage{cite}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{url}
\usepackage{siunitx}
\usepackage{etoolbox}
\usepackage{appendix}

\usepackage{tikz}

\usepackage{csquotes}

%%%% Haskell Style by Prof. Chakravarty %%%%
\usepackage{haskell}

\def \hasalpha {\(\alpha\)}
\def \hasbeta {\(\beta\)}
\def \hasphi {\(\phi\)}
\def \haslambda {\(\lambda\)}

\def \meet {\<meet\> ($\sqcap$) }
\def \join {\<join\> ($\sqcup$) }

\newcommandx{\tocite}[2][1=]{\todo[linecolor=red,backgroundcolor=red!25,bordercolor=red,#1]{Cite: #2}}
\newcommandx{\todoinline}[1]{\todo[inline]{#1}}
\newcommandx{\todofig}[1]{\todo[inline]{Make figure: #1}}

\hypersetup{
 colorlinks,
 citecolor=Red,
 linkcolor=Black,
 urlcolor=Blue
}

% Tufte-book imports natbib, so we can use \citet and \citep without
% importing the package
\usepackage[square]{natbib}

\newcommand{\blankpage}{\newpage\hbox{}\thispagestyle{empty}\newpage}

%This is the stuff for semantic equations%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\robustify\bfseries
\newsavebox{\sembox}
\newlength{\semwidth}
\newlength{\boxwidth}

\newcommand{\Sem}[1]{%
\sbox{\sembox}{\ensuremath{#1}}%
\settowidth{\semwidth}{\usebox{\sembox}}%
\sbox{\sembox}{\ensuremath{\left[\usebox{\sembox}\right]}}%
\settowidth{\boxwidth}{\usebox{\sembox}}%
\addtolength{\boxwidth}{-\semwidth}%
\left[\hspace{-0.3\boxwidth}%
\usebox{\sembox}%
\hspace{-0.3\boxwidth}\right]%
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Tikz styles
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\tikzset{
    hasse/.style={shape=circle, scale=0.35, draw}
}

\tikzset{
    center/.style={shape=circle, scale=0.35}
}

%% Sometimes we want to give a definition; this is how we do that
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\defineword}[2]{%
\begin{description}%
    \item{\textbf{#1}} \hfill \\%
        {#2}%
\end{description}%
}

\newcommand{\sigval}[1]{\bfseries #1}

%% Tufte-LaTeX doesn't show subsections in the ToC or number the sections
%% these two commands fix each one respectively
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\setcounter{secnumdepth}{2}
\usepackage{tocloft}
\setcounter{tocdepth}{1}

\makeatletter

\newcommand\frontmatter{%
    \cleardoublepage
  %\@mainmatterfalse
  \pagenumbering{roman}}

\newcommand\mainmatter{%
    \cleardoublepage
 % \@mainmattertrue
  \pagenumbering{arabic}}

\makeatother

\begin{document}

\frontmatter

%\blankpage

\maketitle

\chapter*{Abstract}
\input{FrontMatter/Abstract.tex}

\tableofcontents
\listoffigures
\listoftables

\chapter*{Acknowledgements}
\input{FrontMatter/Acknowledgements.tex}

\chapter*{Declaration}
\input{FrontMatter/Declaration.tex}

%% Now we start the whole thing off!
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\mainmatter

    \chapter{Introduction}
    \label{chap:intro}
    \input{Intro/Preamble.tex}
    
        \section{Lazy Languages and Parallelism}
        \input{Intro/Introduction.tex}
    
        \section{Thesis Roadmap}
        \input{Intro/Roadmap.tex}

\part{The Idea}
\label{part:idea}

    \chapter{Bird's eye view of our Technique}
    \label{chap:overview}
    \input{Overview/Preamble.tex}

        \section{F-lite: a Lazy Purely Functional Core Language}
        \label{sec:Flite}
        \input{Overview/Flite.tex}
        
        \section{Overview of the Compiler}
        \label{sec:overview}
        \input{Overview/Overview.tex}

    \chapter{Parallelism in a Functional Language}
    \label{chap:background}
    \input{Background/Preamble.tex}
    
        \section{Functional Programming and Parallelism}
        \label{sec:FPandPar}
        \input{Background/FuncProgPar.tex}
    
        \section{Sequential Reduction Machines}
        \label{sec:SequentialMachines}
        \input{Background/SequentialMachines.tex}
    
        \section{Parallel Reduction Machines}
        \label{sec:ParallelMachines}
        \input{Background/ParallelMachines.tex}
    
        \section{Approaches to Parallelism}
        \label{sec:Approaches}
        \input{Background/Approaches.tex}
        
        %Review of Graph Reduction. Needs to focus more on the G-Machine and our
        %implementation. Will we convert to spineless G-Machine?
        \section{History of Graph Reduction}
        \input{Background/funcProgGraphRedctn.tex}

\part{The Discovery and Placement of Safe Parallelism}
\label{part:static}

    \chapter{Finding Safe Parallelism}
    \label{chap:discovery} 
    \input{Static-Analysis/Preamble.tex}

        \section{Original Motivation vs. Our Motivation}
        \input{Static-Analysis/Motivation.tex}
    
        \section{Overview}
        \label{sec:strictnessOverview}
        \input{Static-Analysis/Overview.tex}
    
        \section{Two-Point Forward Analysis}
        \label{sec:twoPoint}
        \input{Static-Analysis/TwoPoint.tex}
    
        \section{Four-Point Forward Analysis}
        \label{sec:fourPoint}
        \input{Static-Analysis/FourPoint.tex}
    
        \section{Projection-Based Analysis}
        \label{sec:projections}
        \input{Static-Analysis/Projections.tex}


    \chapter{Derivation and Use of Parallel Strategies}
    \label{chap:derivation}
    \input{Deriving-Strats/Preamble.tex}

        \section{Expressing Need, Strategically}
        \label{sec:expressingNeed}
        \input{Deriving-Strats/StrategyDerivation.tex}

        \section{Using Derived Strategies}
        \label{sec:parPlacement}
        \input{Platform/Oracles.tex}
    
    
\part{Experimental Setup and Results}
\label{part:implementation}

    \chapter{Experimental Platform} 
    \label{chap:platform}
    \input{Platform/Preamble.tex}
    
        \section{Defunctionalisation (Higher-Order Specialisation)}
        \label{sec:defunctionalisation}
        \input{Platform/Defunctionalisation.tex}
    
        \section{An Implementation of Hinze's Projection-Based Analysis}
        \label{sec:hinzeImplementation}
        
        \section{Keeping Track of all the Threads}
        \label{sec:logging}
        \input{Platform/Logging.tex}
    
        \section{Trying for \texttt{par}: Switching off Parallelism}
        \label{sec:parSwitching}
        \input{Platform/Switching.tex}
    
    \chapter{Run-time Directed Search}
    \label{chap:blind}
    
        This chapter will talk about the work on blind-search with Simon.
    
        \section{Introduction}
        \input{Blind/Intro.tex}
    
        \section{Implicit Parallelism in Functional Languages}
        \label{sec:blind-ParFunc}
        \input{Blind/ParFunc.tex}
    
        \section{Experimental Setup and Results}
        \label{sec:blind-Results}
        \input{Blind/Results.tex}
    
        \section{Conclusions of Bitstring Searching}
        \label{sec:blind-Conclusion}
        \input{Blind/Conclusions.tex}
    
    \chapter{Profile Directed Search}
    \label{chap:prof-search}
    
        New things here.
        \label{sec:informed-search}
        \input{Informed/iip.tex}


\part{Conclusions and Future Directions}
\label{part:conclusion}

    \chapter{Future Directions}
    \label{chap:future}
    \input{Future-Work/Preamble.tex}
    
        \section{Specialising on \underline{\hspace{2cm}}}
        \label{sec:specialiseDepth}
        \input{Future-Work/Specialising.tex}
    
        \section{Hybrid Approaches}
        \label{sec:hybrid}
        \input{Future-Work/Hybrid.tex}
    
        \section{Automating Pipeline Parallelism}
        \label{sec:autoPipe}
    
    
    \chapter{Conclusions}
    \label{chap:conclusions}
    
        And.... we're done.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%% APPENDICES %%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{appendices}

\chapter{Benchmark Programs}

\chapter{Rudimentary Domain Theory}
\label{chap:domain}

\end{appendices}

\listoftodos[Notes]

\if@openright
  \cleardoublepage
\else
  \clearpage
\fi

\bibliography{literature}
\bibliographystyle{plainnat}

\end{document}
